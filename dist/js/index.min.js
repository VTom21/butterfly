(()=>{function f(){document.querySelectorAll("break").forEach(e=>{let t=document.createElement("br");e.parentNode?.replaceChild(t,e)})}function g(e=2){document.querySelectorAll("extra-break").forEach(t=>{let a=document.createDocumentFragment();for(let r=0;r<e;r++){let n=document.createElement("br");a.appendChild(n)}t.parentNode?.replaceChild(a,t)})}function p(){document.querySelectorAll("custom-break").forEach(e=>{let t=document.createDocumentFragment(),a=parseInt(e.getAttribute("n")||"0");for(let r=0;r<a;r++){let n=document.createElement("br");t.appendChild(n)}e.parentNode?.replaceChild(t,e)})}function h(){document.querySelectorAll("divider").forEach(e=>{let t=document.createElement("hr");e.parentNode?.replaceChild(t,e)})}function v(){document.querySelectorAll("highlight").forEach(e=>{let t=document.createElement("strong");t.innerHTML=e.innerHTML,e.parentNode?.replaceChild(t,e)})}document.addEventListener("DOMContentLoaded",()=>{f(),g(),p(),h(),v()});var b=document.querySelectorAll("body *"),l=new WeakMap;document.querySelectorAll(".set").forEach(e=>{l.has(e)||l.set(e,{});let t=l.get(e);Array.from(e.attributes).forEach(a=>{let r=a.name,n=a.value;switch(r){case"thickness":e.style.borderWidth=n+"px";break;case"x-mult":t.scaleX=`scaleX(${n})`;break;case"y-mult":t.scaleY=`scaleY(${n})`;break;case"z-mult":t.scaleZ=`scaleZ(${n})`;break;case"mult":t.scale=`scale(${n})`;break;case"turn":t.rotate=`rotate(${n}deg)`;break;case"x-turn":t.rotate=`rotateX(${n}deg)`;break;case"y-turn":t.rotate=`rotateY(${n}deg)`;break;case"z-turn":t.rotate=`rotateZ(${n}deg)`;break;case"pointer":let o={hand:"pointer",grab:"grab",cross:"crosshair",move:"move",script:"text",idle:"wait",basic:"default",abort:"not-allowed",query:"help",magnify_in:"zoom-in",magnify_out:"zoom-out",disabled:"none"};e.style.cursor=o[n]||n;break;case"blur":e.style.filter=`blur(${n})`;break;case"grayscale":e.style.filter=`grayscale(${n})`;break;case"light":e.style.filter=`brightness(${n})`;break;case"contrast":e.style.filter=`contrast(${n})`;break}}),e.style.transform=Object.values(t).join(" ")});document.querySelectorAll(".rainbow").forEach(e=>{let t=e.getAttribute("offset");t&&e.style.setProperty("--offset",t)});var u={"@click":"click","@dbclick":"dblclick","@m-down":"mousedown","@m-move":"mousemove","@m-over":"mouseover","@m-up":"mouseup","@m-out":"mouseout","@m-wheel":"wheel","@scroll":"scroll","@paste":"paste","@copy":"copy","@k-press":"keypress","@k-down":"keydown","@k-up":"keyup","@load":"load","@change":"change","@resize":"resize","@blur":"blur","@submit":"submit","@search":"search","@input":"input","@select":"select","@reset":"reset","@focus":"focus","@drag":"drag","@drag-end":"dragend","@drag-enter":"dragenter","@drag-leave":"dragleave","@drag-over":"dragover","@drag-start":"dragstart"},c={};for(let e in u){let t=u[e];c[t]||(c[t]=[]),c[t].push(e)}Object.keys(c).forEach(e=>{document.addEventListener(e,t=>{let a=t.target;for(;a&&a!==document;){for(let r of c[e]){let n=a.getAttribute(r);if(n){let o=window[n];typeof o=="function"?o.call(a,t):console.warn(`Handler "${n}" for "${r}" is not defined`);return}}a=a.parentElement}})});document.querySelectorAll("[\\@interlude]").forEach(e=>{let t=e.getAttribute("@interlude"),a=parseInt(e.getAttribute("@time"))||1e3,r=window[t];typeof r=="function"&&setInterval(()=>r.call(e),a)});document.querySelectorAll("[\\@halt]").forEach(e=>{let t=e.getAttribute("@halt"),a=parseInt(e.getAttribute("@time"))||1e3,r=window[t];typeof r=="function"&&setTimeout(()=>r.call(e),a)});document.querySelectorAll("[\\@countdown]").forEach(e=>{let t=e.getAttribute("@countdown"),a=window[t],r=parseInt(e.getAttribute("@tick"))||3e3;if(typeof a!="function"){console.warn(`Handler "${t}" for @countdown is not defined`);return}let n=r,o=100,s=e.textContent,i=setInterval(()=>{n-=o;let m=Math.ceil(n/1e3);e.textContent=s.replace("((countdown))",m),n<=0&&(clearInterval(i),e.textContent=s.replace("((countdown))",0),a.call(e))},o)});document.querySelectorAll("form").forEach(e=>{e.querySelectorAll("input, textarea").forEach(t=>{let a=t.getAttribute("@input-min"),r=t.getAttribute("@input-max"),n=a?parseInt(a):null,o=r?parseInt(r):null;t.dataset.validMin=n?"false":"true",t.dataset.validMax=o?"false":"true",t.addEventListener("input",()=>{let s=t.value.length;n&&s<n?t.dataset.validMin="false":t.dataset.validMin="true",o&&s>o?t.dataset.validMax="false":t.dataset.validMax="true"})}),e.addEventListener("submit",t=>{let a=e.querySelector("input[\\@input-min][data-valid-min='false'], textarea[\\@input-min][data-valid-min='false'], input[\\@input-max][data-valid-max='false'], textarea[\\@input-max][data-valid-max='false']");if(a){t.preventDefault();let r=a.getAttribute("@input-min"),n=a.getAttribute("@input-max"),o="Invalid input.";r&&a.dataset.validMin==="false"?o=`Please enter at least ${r} characters`:n&&a.dataset.validMax==="false"&&(o=`Please enter no more than ${n} characters`),alert(o),a.focus()}})});var y={letters:/^[a-zA-Z]+$/,numbers:/^[0-9]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,hex:/^[0-9a-fA-F]+$/,pass_special:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/,pass_simple:/^[\w!@#$%^&*()_+]{6,}$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^([01]\d|2[0-3]):([0-5]\d)$/,phone:/^\+?[0-9]{7,15}$/};document.querySelectorAll("input[\\@regex], textarea[\\@regex]").forEach(e=>{let t=e.getAttribute("@regex"),a=y[t];if(!a){console.warn(`Unknown @regex type: "${t}"`);return}e.dataset.validRegex="false",e.addEventListener("input",()=>{a.test(e.value)?e.dataset.validRegex="true":e.dataset.validRegex="false"})});document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{let a=e.querySelector("input[\\@regex][data-valid-regex='false'], textarea[\\@regex][data-valid-regex='false']");if(a){t.preventDefault();let r=a.getAttribute("@regex");alert(`Please enter valid ${r}`),a.focus()}})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[\\@toggle]").forEach(e=>{let t=e.getAttribute("@toggle").split(",").map(r=>r.trim()),a=e.getAttribute("@target")?e.getAttribute("@target").split(",").map(r=>r.trim()):[null];e.addEventListener("click",()=>{t.forEach((r,n)=>{let o=a[n]||a[a.length-1];(o?document.querySelectorAll(o):[e]).forEach(i=>{i&&i.classList.toggle(r)})})})})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[\\@resize]").forEach(e=>{let t=e.getAttribute("@resize");if(!t)return;let[a,r]=t.split(","),n=parseInt(a),o=parseInt(r);isNaN(n)||isNaN(o)||(document.body.style.width=n+"px",document.body.style.height=o+"px",document.documentElement.style.width=n+"px",document.documentElement.style.height=o+"px")})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[\\@log]").forEach(e=>{let t=e.getAttribute("@log"),a;if(t==="this"?a=e:t==="window"?a=window:t==="document"?a=document:a=document.querySelector(t),!a){console.warn(`@log target "${t}" not found`);return}a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?console.log(a.value):a instanceof HTMLElement?console.log(a.textContent.trim()):console.log(a)})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("input[\\@trim], textarea[\\@trim]").forEach(e=>{e.addEventListener("input",()=>{let t=e.selectionStart;e.value=e.value.trim(),e.setSelectionRange(t,t)})})});var d={soft:/[<>]/g,strict:/[<>{}"'`;]/g};document.querySelectorAll("input[\\@sanitize], textarea[\\@sanitize]").forEach(e=>{let t=e.getAttribute("@sanitize")||"soft",a=d[t]||d.soft;e.addEventListener("input",()=>{e.value=e.value.replace(a,"")})});document.querySelectorAll("input[\\@slug]").forEach(e=>{e.addEventListener("input",()=>{let a=e.value.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),r=e.getAttribute("@target");if(r){let n=document.querySelector(r);n&&("value"in n?n.value=a:n.textContent=a)}else e.value=a})});})();
